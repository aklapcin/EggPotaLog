{% extends "base_admin.html"%}
{%load post_utils%}
{% block content%}

<div class="row">
    <div class="span12">
        {% if not paginator.objects%}
            <div class="no_posts_alert">
                No post found
            </div>
        {% else %}
            <div class="tabbable tabs-below">
                <div class="tab-content">
                    <table class="table table-striped table-grids">
                        <thead >
                            <tr>
                                <td class="id">
                                    No
                                </td>
                                <td class="title">
                                    <a class="dsc" href="{%url post_dashboard %}{% q_string order_by='-title' per_page=per_page%}"></a>
                                    <a class="asc" href="{%url post_dashboard %}{% q_string order_by='title' per_page=per_page%}"></a>
                                    Post title
                                </td>
                                <td class="public">
                                    <a class="dsc" href="{%url post_dashboard %}{% q_string order_by='-published' per_page=per_page%}"></a>
                                    <a class="asc" href="{%url post_dashboard %}{% q_string order_by='published' per_page=per_page%}"></a>
                                    Is published

                                </td>
                                <td class="comments">
                                    Comments
                                </td>

                                <td class="date_created">
                                    <a class="dsc" href="{%url post_dashboard %}{% q_string order_by='-date_created' per_page=per_page%}"></a>
                                    <a class="asc" href="{%url post_dashboard %}{% q_string order_by='date_created' per_page=per_page%}"></a>
                                    Created
                                </td>
                                <td class="date_edited">
                                    <a class="dsc" href="{%url post_dashboard %}{% q_string order_by='-last_edited' per_page=per_page%}"></a>
                                    <a class="asc" href="{%url post_dashboard %}{% q_string order_by='last_edited' per_page=per_page%}"></a>
                                    Last Edited
                                </td>
                                <td>
                                    Actions
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            {% for post in paginator.objects%}
                            <tr>
                                <td>{{forloop.counter|add:paginator.start}}</td>
                                <td><a href= "{% url  edit_post post_key=post.key|to_str %}">{{post.title}}</a></td>
                                <td>{% if post.published%}Yes{%else%}No{%endif%}</td>
                                <td>{{post.comments.count}}</td>
                                <td>{{post.date_created}}</td>
                                <td>{{post.last_edited}}</td>

                                <td>
                                    <a href="delete" class="btn">Delete</a>
                                    <a href="{% url  edit_post post_key=post.key|to_str %}" class="btn">Edit</a>
                                </td>
                            </tr>
                            {% endfor%}
                        </tbody>
                    </table>
                </div>
                <div class="paginator pull-left">
                    <span class="comment-span">Posts per page</span>
                    <select id="per_page_select" class="input-mini">
                        <option value="10" {% if per_page == 10 %}selected="selected" {% endif%}>10</option>
                        <option value="20" {% if per_page == 20 %}selected="selected" {% endif%}>20</option>
                        <option value="50" {% if per_page == 50 %}selected="selected"{% endif%}>50</option>
                    </select>
                </div>
                <ul class="nav nav-tabs dashboard-paginator">
                    {%if paginator.has_next%}
                        <li>
                            <a class="button_page btn-next" href="{%url dashboard %}{% q_string page=paginator.last_page|add:1 order_by=order_by paginator_id=paginator.paginator_id per_page=per_page%}"></a>
                        </li>
                    {% endif%}
                    {%for p in paginator.last_page|get_range reversed %}
                        <li class="{%if p|add:1 == paginator.current_page%} active{%endif%}">
                            <a class="button_page {% if forloop.first %}first{% endif %}" href="{%url dashboard %}{% q_string page=p|add:1 order_by=order_by paginator_id=paginator.paginator_id per_page=per_page%}"
                            >
                            {{p|add:1}}</a>
                        </li>
                    {% endfor%}
                </ul>
            </div>
        {% endif%}
    </div>
</div>

{% endblock %}
